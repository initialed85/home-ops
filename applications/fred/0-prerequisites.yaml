---
apiVersion: v1
kind: Namespace
metadata:
  name: fred
  labels:
    name: fred
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: ssd
  namespace: fred
spec:
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 512Gi
  storageClassName: nfs-ssd
  volumeMode: Filesystem
# ---
# apiVersion: v1
# kind: PersistentVolumeClaim
# metadata:
#   name: local
#   namespace: fred
# spec:
#   accessModes:
#     - ReadWriteOnce
#   resources:
#     requests:
#       storage: 128Gi
#   storageClassName: local-path
#   volumeMode: Filesystem
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: config
  namespace: fred
data:
  API_URL: http://api:7070
  BASE_URL: /
  DJANGOLANG_NODE_NAME: api
  DJANGOLANG_PROFILE: "1"
  PAGER: "cat"
  POSTGIS_GDAL_ENABLED_DRIVERS: "ENABLE_ALL"
  POSTGRES_DB: fred
  POSTGRES_HOST: postgres
  POSTGRES_PORT: "5432"
  POSTGRES_USER: "postgres"
  REDIS_URL: redis://redis:6379
  SWAGGER_JSON_URL: https://fred.initialed85.cc/api/openapi.json
  daemon.json: |
    {
      "insecure-registries": [
        "kube-registry:5000",
        "kube-registry.kube-system.svc.cluster.local:5000"
      ],
      "exec-opts": [
        "native.cgroupdriver=cgroupfs"
      ],
      "default-ulimits": {
        "nofile": {
          "Hard": 128000,
          "Name": "nofile",
          "Soft": 128000
        }
      }
    }
---
# kubectl -n fred create secret generic secret --dry-run=client --from-literal='POSTGRES_PASSWORD=(redacted)' -o yaml | kubeseal --controller-name=sealed-secrets --controller-namespace=kube-system -o yaml
# apiVersion: bitnami.com/v1alpha1
# kind: SealedSecret
# metadata:
#   creationTimestamp: null
#   name: secret
#   namespace: fred
# spec:
#   encryptedData:
#     POSTGRES_PASSWORD: AgBlf7svvrpaMY9gnwhaSQmJ57ZSz3Zba/ko2JTG/JgZPKhL+l3QoOMXWXNhzTK460U/s02CRM+TDMoT2REaAHje47vpFSlSaEEwCYtPDnkd5Ndyi2ExP8/CssUgUTDwDnf7jESyQ04mjqt4dD+9SgSpUIkqqVe2LL2riByhQNzNIRMP2vlQKTQXWO6ITJMHBaAvVKalX87zm4+HL8YZffQgFGjuvOVSwJn+Vs6s4sxSZpYwTRFAwgPpg7lVi6pP++afK6+mJy+dBflN6M8YXKA2AAcXviwZQgob413RsqGxMnZC0QK5cfOuKDr9gqmna5z+dph8JD85XPRieE43lPaIAMXDOEKgdwzWlczX0Np2Nzjzyu6h88HvSo/9ff9isF9FvjAu76iSXvIIrjsATtlRzMzPWjcvfKcW1CVQeZby8mWX9u87V9fSvMi3TKKURjxh+v041z/mCUbXLo90n+M7gs6AAnBoRr9M6iIDCb629+jgtMZd6L7uNK7/XbwE1poYmBT1KPPL0iAPaqplgclWtwjAvgblwJ8OGRMkEtXAG7wV4mMdy38pEsYVhTMDwmN8wmEbExOkfcVzp++9HT/bRQAf2Eq9y+hGseoqp2gbKtQrK+0bzFKEo4NkP6f5pcPSLQ36E+NQmD0Clj0nwmkw2MC8W0c9iYSgwmcm4uE1/S7Ku8Zr/vKIEzrEazh0CGc5rZyEhQIB
#   template:
#     metadata:
#       creationTimestamp: null
#       name: secret
#       namespace: fred
